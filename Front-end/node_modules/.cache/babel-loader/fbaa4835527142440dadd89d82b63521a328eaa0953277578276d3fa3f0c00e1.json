{"ast":null,"code":"export async function addBook(data) {\n  const userId = localStorage.getItem('userId');\n  const book = {\n    userId,\n    title: data.title,\n    author: data.author,\n    description: data.description // champ description\n  };\n\n  const bodyFormData = new FormData();\n  bodyFormData.append('book', JSON.stringify(book));\n  if (data.file && data.file[0]) {\n    bodyFormData.append('image', data.file[0]);\n  }\n  try {\n    return await axios.post(`${API_ROUTES.BOOKS}`, bodyFormData, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    });\n  } catch (err) {\n    var _err$response;\n    console.error(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n    return {\n      error: true,\n      message: err.message\n    };\n  }\n}","map":{"version":3,"names":["addBook","data","userId","localStorage","getItem","book","title","author","description","bodyFormData","FormData","append","JSON","stringify","file","axios","post","API_ROUTES","BOOKS","headers","Authorization","err","console","error","response","message"],"sources":["C:/Users/junio/Desktop/Soumi/OCR/Mon_Vieux_Grimoire/Front-end/src/lib/common.js"],"sourcesContent":["export async function addBook(data) {\n  const userId = localStorage.getItem('userId');\n\n  const book = {\n    userId,\n    title: data.title,\n    author: data.author,\n    description: data.description, // champ description\n  };\n\n  const bodyFormData = new FormData();\n  bodyFormData.append('book', JSON.stringify(book));\n\n  if (data.file && data.file[0]) {\n    bodyFormData.append('image', data.file[0]);\n  }\n\n  try {\n    return await axios.post(`${API_ROUTES.BOOKS}`, bodyFormData, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n    });\n  } catch (err) {\n    console.error(err.response?.data || err.message);\n    return { error: true, message: err.message };\n  }\n}\n"],"mappings":"AAAA,OAAO,eAAeA,OAAO,CAACC,IAAI,EAAE;EAClC,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;EAE7C,MAAMC,IAAI,GAAG;IACXH,MAAM;IACNI,KAAK,EAAEL,IAAI,CAACK,KAAK;IACjBC,MAAM,EAAEN,IAAI,CAACM,MAAM;IACnBC,WAAW,EAAEP,IAAI,CAACO,WAAW,CAAE;EACjC,CAAC;;EAED,MAAMC,YAAY,GAAG,IAAIC,QAAQ,EAAE;EACnCD,YAAY,CAACE,MAAM,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC,CAAC;EAEjD,IAAIJ,IAAI,CAACa,IAAI,IAAIb,IAAI,CAACa,IAAI,CAAC,CAAC,CAAC,EAAE;IAC7BL,YAAY,CAACE,MAAM,CAAC,OAAO,EAAEV,IAAI,CAACa,IAAI,CAAC,CAAC,CAAC,CAAC;EAC5C;EAEA,IAAI;IACF,OAAO,MAAMC,KAAK,CAACC,IAAI,CAAE,GAAEC,UAAU,CAACC,KAAM,EAAC,EAAET,YAAY,EAAE;MAC3DU,OAAO,EAAE;QACPC,aAAa,EAAG,UAASjB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;MACzD;IACF,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOiB,GAAG,EAAE;IAAA;IACZC,OAAO,CAACC,KAAK,CAAC,kBAAAF,GAAG,CAACG,QAAQ,kDAAZ,cAAcvB,IAAI,KAAIoB,GAAG,CAACI,OAAO,CAAC;IAChD,OAAO;MAAEF,KAAK,EAAE,IAAI;MAAEE,OAAO,EAAEJ,GAAG,CAACI;IAAQ,CAAC;EAC9C;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}